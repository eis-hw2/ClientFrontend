(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{JDLn:function(e,t,r){e.exports={toolbar:"antd-pro-components-footer-toolbar-index-toolbar",left:"antd-pro-components-footer-toolbar-index-left",right:"antd-pro-components-footer-toolbar-index-right"}},Zpge:function(e,t,r){e.exports={card:"antd-pro-pages-forms-style-card",heading:"antd-pro-pages-forms-style-heading",steps:"antd-pro-pages-forms-style-steps",errorIcon:"antd-pro-pages-forms-style-errorIcon",errorPopover:"antd-pro-pages-forms-style-errorPopover",errorListItem:"antd-pro-pages-forms-style-errorListItem",errorField:"antd-pro-pages-forms-style-errorField",editable:"antd-pro-pages-forms-style-editable",advancedForm:"antd-pro-pages-forms-style-advancedForm",optional:"antd-pro-pages-forms-style-optional"}},erBf:function(e,t,r){"use strict";r.r(t);r("IzEo");var s=r("bx4M"),a=r("jehZ"),c=r.n(a),m=(r("+L6B"),r("2/Rp")),u=(r("5NDa"),r("5rEg")),p=(r("Xi6J"),r("kl6h")),d=(r("14J3"),r("BMrR")),f=(r("jCWc"),r("kPKH")),l=(r("miYZ"),r("tsqr")),i=(r("Q9mQ"),r("diRs")),g=(r("Pwec"),r("CtXQ")),n=r("2Taf"),h=r.n(n),o=r("vZ4D"),y=r.n(o),v=r("l4Ni"),b=r.n(v),E=r("ujKo"),T=r.n(E),O=r("MhPg"),C=r.n(O),S=(r("y8nQ"),r("Vl3Y")),P=(r("iQDF"),r("+eQT")),k=(r("OaEy"),r("2fM7")),w=r("q1tI"),I=r.n(w),F=r("MuoO"),M=r("Y/ft"),N=r.n(M),x=r("17x9"),j=r.n(x),D=r("TSYQ"),L=r.n(D),V=r("JDLn"),q=r.n(V),z=function(e){function o(){var e,n;h()(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=b()(this,(e=T()(o)).call.apply(e,[this].concat(r))),n.state={width:void 0},n.resizeFooterToolbar=function(){var e=document.querySelector(".ant-layout-sider");if(null!=e){var t=n.context.isMobile,r=t?null:"calc(100% - ".concat(e.style.width,")"),a=n.state.width;a!==r&&n.setState({width:r})}},n}return C()(o,e),y()(o,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar),this.resizeFooterToolbar()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,a=e.extra,n=N()(e,["children","className","extra"]),o=this.state.width;return I.a.createElement("div",c()({className:L()(r,q.a.toolbar),style:{width:o}},n),I.a.createElement("div",{className:q.a.left},a),I.a.createElement("div",{className:q.a.right},t))}}]),o}(w["Component"]);z.contextTypes={isMobile:j.a.bool};r("zHco"),r("g9YV");var A=r("wCAj"),R=(r("cIOH"),r("VCL8")),Y=r("3S7+"),B=r("YMnH"),_=r("Kz+r"),Q=r("wEI+");function J(e){return J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W.apply(this,arguments)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),e}function K(e,t){return!t||"object"!==J(t)&&"function"!==typeof t?G(e):t}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}var te=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r},re=function(e){function t(e){var u;return Z(this,t),u=K(this,X(t).call(this,e)),u.onConfirm=function(e){u.setVisible(!1,e);var t=u.props.onConfirm;t&&t.call(G(u),e)},u.onCancel=function(e){u.setVisible(!1,e);var t=u.props.onCancel;t&&t.call(G(u),e)},u.onVisibleChange=function(e){u.setVisible(e)},u.saveTooltip=function(e){u.tooltip=e},u.renderOverlay=function(e,t){var r=u.props,a=r.okButtonProps,n=r.cancelButtonProps,o=r.title,l=r.cancelText,i=r.okText,s=r.okType,c=r.icon;return w["createElement"]("div",null,w["createElement"]("div",{className:"".concat(e,"-inner-content")},w["createElement"]("div",{className:"".concat(e,"-message")},c,w["createElement"]("div",{className:"".concat(e,"-message-title")},o)),w["createElement"]("div",{className:"".concat(e,"-buttons")},w["createElement"](m["a"],W({onClick:u.onCancel,size:"small"},n),l||t.cancelText),w["createElement"](m["a"],W({onClick:u.onConfirm,type:s,size:"small"},a),i||t.okText))))},u.renderConfirm=function(e){var t=e.getPrefixCls,r=u.props,a=r.prefixCls,n=r.placement,o=te(r,["prefixCls","placement"]),l=t("popover",a),i=w["createElement"](B["a"],{componentName:"Popconfirm",defaultLocale:_["a"].Popconfirm},function(e){return u.renderOverlay(l,e)});return w["createElement"](Y["a"],W({},o,{prefixCls:l,placement:n,onVisibleChange:u.onVisibleChange,visible:u.state.visible,overlay:i,ref:u.saveTooltip}))},u.state={visible:e.visible},u}return $(t,e),U(t,[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var r=this.props;"visible"in r||this.setState({visible:e});var a=r.onVisibleChange;a&&a(e,t)}},{key:"render",value:function(){return w["createElement"](Q["a"],null,this.renderConfirm)}}],[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}]),t}(w["Component"]);re.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:w["createElement"](g["a"],{type:"exclamation-circle",theme:"filled"})},Object(R["polyfill"])(re);var ae,ne,oe,le,ie=re,se=(r("/zsF"),r("PArb")),ce=r("p0pE"),ue=r.n(ce),me=r("Y+p1"),pe=r.n(me),de=r("Zpge"),fe=r.n(de),ge=(w["PureComponent"],r("Y2fQ")),he=(r("+n12"),k["a"].Option),ye=(P["a"].RangePicker,{wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}}),ve={orderType:"OrderType",orderSide:"OrderSide",future:"Future",price:"Price",volume:"Volume",unitPrice:"Price",targetType:"Target Order Type",stopPrice:"Stop Price",startTime:"Start Time",endTime:"End Time",processStrategy:"Strategy",intervalMinute:"Interval Minute"},be=(ae=Object(F["connect"])(function(e){var t=e.chart,r=e.loading;return{chart:t,submitting:r.effects["form/submitAdvancedForm"]}}),ne=S["a"].create(),ae(oe=ne((le=function(e){function n(){var e,o;h()(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return o=b()(this,(e=T()(n)).call.apply(e,[this].concat(r))),o.state={width:"100%",orderType:"MarketOrder",orderSide:"BUYER",future:"",targetType:"MarketOrder",startTime:"00:00:00",endTime:"00:00:00"},o.getErrorInfo=function(){var e=o.props.form.getFieldsError,t=e(),r=Object.keys(t).filter(function(e){return t[e]}).length;if(!t||0===r)return null;var a=function(e){var t=document.querySelector('label[for="'.concat(e,'"]'));t&&t.scrollIntoView(!0)},n=Object.keys(t).map(function(e){return t[e]?I.a.createElement("li",{key:e,className:fe.a.errorListItem,onClick:function(){return a(e)}},I.a.createElement(g["a"],{type:"cross-circle-o",className:fe.a.errorIcon}),I.a.createElement("div",{className:fe.a.errorMessage},t[e][0]),I.a.createElement("div",{className:fe.a.errorField},ve[e])):null});return I.a.createElement("span",{className:fe.a.errorIcon},I.a.createElement(i["a"],{title:"\u8868\u5355\u6821\u9a8c\u4fe1\u606f",content:n,overlayClassName:fe.a.errorPopover,trigger:"click",getPopupContainer:function(e){return e.parentNode}},I.a.createElement(g["a"],{type:"exclamation-circle"})),r)},o.resizeFooterToolbar=function(){requestAnimationFrame(function(){var e=document.querySelectorAll(".ant-layout-sider")[0];if(e){var t="calc(100% - ".concat(e.style.width,")"),r=o.state.width;r!==t&&o.setState({width:t})}})},o.validate=function(){var e=o.props,t=e.form.validateFieldsAndScroll;e.dispatch;t(function(e,t){if(!e){var r=o.props.chart,a=r.currentBroker;"IcebergOrder"===t.type&&(t.sendStrategy="DELAY_ONE",t.type="LimitOrder",t.startTime=o.state.startTime,t.endTime=o.state.endTime),console.log(t),fetch("http://202.120.40.8:30255/api/v1/Order?brokerId="+a,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){console.log(e.body),"error"!==e.id&&null!==e.body[a]?(l["a"].success("Order Successfully Created"),o.handleReset()):l["a"].error("Failed to Create Order")})}})},o.onChangeOrderType=function(e){console.log("selected ".concat(e)),o.setState({orderType:e})},o.onChangeOrderSide=function(e){console.log("selected ".concat(e)),o.setState({orderSide:e})},o.onChangeFuture=function(e){console.log("selected ".concat(e)),o.setState({future:e})},o.onChangeStartTime=function(e,t){console.log(e.minutes()),o.setState({startTime:t})},o.onChangeEndTime=function(e,t){o.setState({endTime:t})},o.onChangeStrategy=function(e){o.setState({processStrategy:e})},o.onChangeTargetType=function(e){console.log("selected ".concat(e)),o.setState({targetType:e})},o.handleReset=function(){o.props.form.resetFields()},o}return C()(n,e),y()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,t=e.chart,r=(e.loading,this.props),a=r.form.getFieldDecorator,n=r.submitting,o=this.state,l=(o.width,o.orderType),i=(t.visitData,t.visitData2,t.salesData,t.searchData,t.offlineData,t.offlineChartData,t.salesTypeData,t.salesTypeDataOnline,t.salesTypeDataOffline,t.brokersData,t.futuresData);return I.a.createElement(s["a"],{title:"Creat Order",className:fe.a.card,bordered:!1},I.a.createElement(S["a"],{layout:"vertical",hideRequiredMark:!0},I.a.createElement(d["a"],{gutter:16},I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.orderType},a("type",{rules:[{required:!0,message:"Choose OrderType"}]})(I.a.createElement(k["a"],{onChange:this.onChangeOrderType,placeholder:"Choose OrderType"},I.a.createElement(he,{value:"MarketOrder"},"MartketOrder"),I.a.createElement(he,{value:"LimitOrder"},"LimitOrder"),I.a.createElement(he,{value:"StopOrder"},"StopOrder"),I.a.createElement(he,{value:"IcebergOrder"},"IcebergOrder"))))),I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.orderSide},a("side",{rules:[{required:!0,message:"Choose OrderSide"}]})(I.a.createElement(k["a"],{onChange:this.onChangeOrderSide,placeholder:"Choose OrderSide"},I.a.createElement(he,{value:"BUYER"},"Buy"),I.a.createElement(he,{value:"SELLER"},"Sell")))))),"IcebergOrder"===l?I.a.createElement(d["a"],{gutter:16},I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.processStrategy},a("processStrategy",{rules:[{required:!0,message:"Choose OrderSide"}]})(I.a.createElement(k["a"],{onChange:this.onChangeStrategy,placeholder:"Choose Strategy"},I.a.createElement(he,{value:"VWAP"},"VWAP"),I.a.createElement(he,{value:"TWAP"},"TWAP"))))),I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.startTime},a("startTime",{rules:[{required:!0,message:"Choose Target OrderType"}]})(I.a.createElement(p["a"],{value:this.state.startTime,onChange:this.onChangeStartTime})))),I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.endTime},a("endTime",{rules:[{required:!0,message:"Input Stop Price"}]})(I.a.createElement(p["a"],{value:this.state.endTime,onChange:this.onChangeEndTime})))),I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.intervalMinute},a("intervalMinute",{rules:[{required:!0,message:"Input Stop Price"}]})(I.a.createElement(u["a"],{placeholder:"Input Interval Minute"}))))):I.a.createElement("span",null),"StopOrder"===l?I.a.createElement(d["a"],{gutter:16},I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.targetType},a("targetType",{rules:[{required:!0,message:"Choose Target OrderType"}]})(I.a.createElement(k["a"],{onChange:this.onChangeTargetType,placeholder:"Choose Target OrderType"},I.a.createElement(he,{value:"MarketOrder"},"MartketOrder"),I.a.createElement(he,{value:"LimitOrder"},"LimitOrder"))))),I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.stopPrice},a("stopPrice",{rules:[{required:!0,message:"Input Stop Price"}]})(I.a.createElement(u["a"],{placeholder:"Input Stop Price"}))))):I.a.createElement("span",null),I.a.createElement(d["a"],{gutter:16},I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.future},a("futureName",{rules:[{required:!0,message:"Choose Future"}]})(I.a.createElement(k["a"],{onChange:this.onChangeFuture,placeholder:"Choose Future"},i.map(function(e){return I.a.createElement(he,{value:e.description},e.description)})))))),I.a.createElement(d["a"],{gutter:16},I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.volume},a("totalCount",{rules:[{required:!0,message:"Input Volume"}]})(I.a.createElement(u["a"],{placeholder:"Input Volume"})))),"MarketOrder"===l||"StopOrder"===this.state.orderType&&"MarketOrder"===this.state.targetType?I.a.createElement("br",null):I.a.createElement(f["a"],{lg:6,md:12,sm:24},I.a.createElement(S["a"].Item,{label:ve.unitPrice},a("unitPrice",{rules:[{required:!0,message:"Input Price"}]})(I.a.createElement(u["a"],{placeholder:"Input Price"}))))),I.a.createElement(d["a"],{gutter:16},I.a.createElement(S["a"].Item,c()({},ye,{style:{marginTop:32}}),I.a.createElement(m["a"],{type:"primary",htmlType:"submit",onClick:this.validate,loading:n},I.a.createElement(ge["FormattedMessage"],{id:"form.submit"}))))))}}]),n}(w["PureComponent"]),oe=le))||oe)||oe);t["default"]=be}}]);